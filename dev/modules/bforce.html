<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>body forces</title>
<link rel="stylesheet" href="/udoc/css/main.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>body forces</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_data_structures">data structures</a></li>
<li><a href="#_interface">interface</a></li>
<li><a href="#_configuration">configuration</a>
<ul class="sectlevel2">
<li><a href="#_none">none</a></li>
<li><a href="#_constant">constant</a></li>
<li><a href="#_double_poiseuille">double poiseuille</a></li>
<li><a href="#_shear">shear</a></li>
<li><a href="#_4_roller_mill">4 roller mill</a></li>
<li><a href="#_radial">radial</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>force applied to every particles</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_structures">data structures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Defined by two structures:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>BForce</code>, contains all informations needed for the  force
field. It is hold and maintained on host.</p>
</li>
<li>
<p><code>BForce_v</code> (<em>BForce view</em>), containing only the information needed at
a specific time. It is passed to device kernels.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The parameters are listed in the following structures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span style="color:#777">/* constant force f */</span>
<span style="color:#080;font-weight:bold">struct</span> BForce_cste {
    float3 a; <span style="color:#777">// acceleration vector</span>
};

<span style="color:#777">/* double poiseuille */</span>
<span style="color:#080;font-weight:bold">struct</span> BForce_dp {
    <span style="color:#0a8;font-weight:bold">float</span> a; <span style="color:#777">// acceleration in x direction</span>
};

<span style="color:#777">/* shear force fx = a * (y - yc) */</span>
<span style="color:#080;font-weight:bold">struct</span> BForce_shear {
    <span style="color:#0a8;font-weight:bold">float</span> a; <span style="color:#777">// acceleration is a * y in x direction</span>
};

<span style="color:#777">/* 4 rollers mill */</span>
<span style="color:#080;font-weight:bold">struct</span> BForce_rol {
    <span style="color:#0a8;font-weight:bold">float</span> a;  <span style="color:#777">// intensity of the acceleration</span>
};

<span style="color:#777">/* radial force decaying as 1/r */</span>
<span style="color:#080;font-weight:bold">struct</span> BForce_rad {
    <span style="color:#0a8;font-weight:bold">float</span> a; <span style="color:#777">// radial acceleartion is a / r</span>
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>They are used to initialise the <code>BForce</code> object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span style="color:#088;font-weight:bold">void</span> bforce_ini_none(<span style="color:#777">/**/</span> BForce *p);            <b class="conum">(1)</b>
<span style="color:#088;font-weight:bold">void</span> bforce_ini_cste(float3 f, <span style="color:#777">/**/</span> BForce *p);  <b class="conum">(2)</b>
<span style="color:#088;font-weight:bold">void</span> bforce_ini_dp(<span style="color:#0a8;font-weight:bold">float</span> a, <span style="color:#777">/**/</span> BForce *p);     <b class="conum">(3)</b>
<span style="color:#088;font-weight:bold">void</span> bforce_ini_shear(<span style="color:#0a8;font-weight:bold">float</span> a, <span style="color:#777">/**/</span> BForce *p);  <b class="conum">(4)</b>
<span style="color:#088;font-weight:bold">void</span> bforce_ini_rol(<span style="color:#0a8;font-weight:bold">float</span> a, <span style="color:#777">/**/</span> BForce *p);    <b class="conum">(5)</b>
<span style="color:#088;font-weight:bold">void</span> bforce_ini_rad(<span style="color:#0a8;font-weight:bold">float</span> a, <span style="color:#777">/**/</span> BForce *p);    <b class="conum">(6)</b></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interface">interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>allocate/deallocate the structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span style="color:#088;font-weight:bold">void</span> bforce_ini(BForce **p);
<span style="color:#088;font-weight:bold">void</span> bforce_fin(BForce *p);</code></pre>
</div>
</div>
<div class="paragraph">
<p>initialize to a given force function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span style="color:#088;font-weight:bold">void</span> bforce_ini_none(<span style="color:#777">/**/</span> BForce *p);            <b class="conum">(1)</b>
<span style="color:#088;font-weight:bold">void</span> bforce_ini_cste(float3 f, <span style="color:#777">/**/</span> BForce *p);  <b class="conum">(2)</b>
<span style="color:#088;font-weight:bold">void</span> bforce_ini_dp(<span style="color:#0a8;font-weight:bold">float</span> a, <span style="color:#777">/**/</span> BForce *p);     <b class="conum">(3)</b>
<span style="color:#088;font-weight:bold">void</span> bforce_ini_shear(<span style="color:#0a8;font-weight:bold">float</span> a, <span style="color:#777">/**/</span> BForce *p);  <b class="conum">(4)</b>
<span style="color:#088;font-weight:bold">void</span> bforce_ini_rol(<span style="color:#0a8;font-weight:bold">float</span> a, <span style="color:#777">/**/</span> BForce *p);    <b class="conum">(5)</b>
<span style="color:#088;font-weight:bold">void</span> bforce_ini_rad(<span style="color:#0a8;font-weight:bold">float</span> a, <span style="color:#777">/**/</span> BForce *p);    <b class="conum">(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>no force</p>
</li>
<li>
<p>constant force <code>f</code></p>
</li>
<li>
<p>double poiseuille</p>
</li>
<li>
<p>shear</p>
</li>
<li>
<p>4 roller mill</p>
</li>
<li>
<p>radial force</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>initialize from configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span style="color:#088;font-weight:bold">void</span> bforce_ini_conf(<span style="color:#088;font-weight:bold">const</span> Config *cfg, <span style="color:#777">/**/</span> BForce *bf);</code></pre>
</div>
</div>
<div class="paragraph">
<p>interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span style="color:#088;font-weight:bold">void</span> bforce_adjust(float3 f, <span style="color:#777">/**/</span> BForce *fpar); <b class="conum">(1)</b>
<span style="color:#088;font-weight:bold">void</span> bforce_apply(<span style="color:#0a8;font-weight:bold">long</span> it, Coords c, <span style="color:#0a8;font-weight:bold">float</span> mass, <span style="color:#088;font-weight:bold">const</span> BForce *bf, <span style="color:#0a8;font-weight:bold">int</span> n, <span style="color:#088;font-weight:bold">const</span> Particle *pp, <span style="color:#777">/**/</span> Force *ff); <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>change value of the force</p>
</li>
<li>
<p>apply body force to particles</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_none">none</h3>
<div class="paragraph">
<p>no body force (default value)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cfg">bforce {
    type = &quot;none&quot;;
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_constant">constant</h3>
<div class="paragraph">
<p>constant force</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cfg">bforce {
    type = &quot;constant&quot;;
    f    = [1.0, 0.0, 0.0];
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_double_poiseuille">double poiseuille</h3>
<div class="paragraph">
<p><code>fx = y &gt; yc ? a : -a</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cfg">bforce {
    type = &quot;double_poiseuille&quot;;
    a    = 1.0;
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_shear">shear</h3>
<div class="paragraph">
<p><code>fx = a * (y - yc)</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cfg">bforce {
    type = &quot;shear&quot;;
    a    = 1.0;
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_4_roller_mill">4 roller mill</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cfg">bforce {
    type = &quot;four_roller&quot;;
    a    = 1.0;
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_radial">radial</h3>
<div class="paragraph">
<p><code>fr = a * er / r</code>, where <code>fr</code> is radial force, <code>er</code> is unit radial
vector at position <code>r</code> and <code>r</code> is radial position.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cfg">bforce {
    type = &quot;rad&quot;;
    a    = 1.0;
};</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</body>
</html>