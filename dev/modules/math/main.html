<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Math</title>
<link rel="stylesheet" href="/udoc/css/main.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Math</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_linal">linal</a>
<ul class="sectlevel2">
<li><a href="#_interface">interface</a></li>
</ul>
</li>
<li><a href="#_host_random_number_generation">Host random number generation</a>
<ul class="sectlevel2">
<li><a href="#_interface_2">interface</a></li>
</ul>
</li>
<li><a href="#_linar_coordinate_transformation">linar coordinate transformation</a>
<ul class="sectlevel2">
<li><a href="#_interface_3">interface</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Helpers for math operations and random number generation</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_linal">linal</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Linear algebra helpers on host</p>
</div>
<div class="sect2">
<h3 id="_interface">interface</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span class="comment">/* invert symmetric matrix m0[6] */</span>
<span class="directive">void</span> linal_inv3x3(<span class="directive">const</span> <span class="predefined-type">float</span> *m0, <span class="comment">/**/</span> <span class="predefined-type">float</span> *minv0); <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>inverse symmetric 3 by 3 matrix; fails and returns an error for
singular matrices with determinant smaller than epsilon (hardcoded
to <code>1e-8</code>).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>structure of the matrix is <code>xx, xy, yy, yz, zz</code>, where</p>
</div>
<div class="listingblock">
<div class="content">
<pre>     ( xx xy xz)
A =  ( xy yy yz)
     ( xz yz zz)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_host_random_number_generation">Host random number generation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Generate uniform random numbers on host in floating point precision</p>
</div>
<div class="sect2">
<h3 id="_interface_2">interface</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span class="keyword">struct</span> RNDunif;                                             <b class="conum">(1)</b>
<span class="directive">void</span> rnd_ini(<span class="predefined-type">int</span> x, <span class="predefined-type">int</span> y, <span class="predefined-type">int</span> z, <span class="predefined-type">int</span> c, <span class="comment">/**/</span> RNDunif **r); <b class="conum">(2)</b>
<span class="directive">void</span> rnd_fin(RNDunif *r);                                   <b class="conum">(3)</b>
<span class="predefined-type">float</span> rnd_get(RNDunif *r);                                  <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>hidden structure containing state of the rng</p>
</li>
<li>
<p>allocate and initialize the rng (<code>x</code>, <code>y</code>, <code>z</code> and <code>c</code> are states of the rng)</p>
</li>
<li>
<p>deallocate rng states</p>
</li>
<li>
<p>generate a random number in single precision; modify the state</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_linar_coordinate_transformation">linar coordinate transformation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_interface_3">interface</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><span class="directive">void</span> tform_ini(Tform**); <b class="conum">(1)</b>
<span class="directive">void</span> tform_fin(Tform*);

<span class="directive">void</span> tform_vector(<span class="directive">const</span> <span class="predefined-type">float</span> a0[<span class="integer">3</span>], <span class="directive">const</span> <span class="predefined-type">float</span> a1[<span class="integer">3</span>],   <span class="directive">const</span> <span class="predefined-type">float</span> b0[<span class="integer">3</span>], <span class="directive">const</span> <span class="predefined-type">float</span> b1[<span class="integer">3</span>], <span class="comment">/**/</span> Tform*);
<span class="directive">void</span> tform_chain(Tform*, Tform*, <span class="comment">/**/</span> Tform*);
<span class="directive">void</span> tform_grid2grid(<span class="directive">const</span> <span class="predefined-type">float</span> f_lo[<span class="integer">3</span>], <span class="directive">const</span> <span class="predefined-type">float</span> f_hi[<span class="integer">3</span>], <span class="directive">const</span> <span class="predefined-type">int</span> f_n[<span class="integer">3</span>],
                     <span class="directive">const</span> <span class="predefined-type">float</span> t_lo[<span class="integer">3</span>], <span class="directive">const</span> <span class="predefined-type">float</span> t_hi[<span class="integer">3</span>], <span class="directive">const</span> <span class="predefined-type">int</span> t_n[<span class="integer">3</span>], <span class="comment">/**/</span>
                     Tform*);
<span class="directive">void</span> tform_to_grid(<span class="directive">const</span> <span class="predefined-type">float</span> a0[<span class="integer">3</span>], <span class="directive">const</span> <span class="predefined-type">float</span> b0[<span class="integer">3</span>], <span class="directive">const</span> <span class="predefined-type">int</span> n[<span class="integer">3</span>], <span class="comment">/**/</span> Tform*);
<span class="directive">void</span> tform_from_grid(<span class="directive">const</span> <span class="predefined-type">float</span> a0[<span class="integer">3</span>], <span class="directive">const</span> <span class="predefined-type">float</span> b0[<span class="integer">3</span>], <span class="directive">const</span> <span class="predefined-type">int</span> n[<span class="integer">3</span>], <span class="comment">/**/</span> Tform*);

<span class="directive">void</span> tform_convert(Tform*, <span class="directive">const</span> <span class="predefined-type">float</span> a0[<span class="integer">3</span>], <span class="comment">/**/</span> <span class="predefined-type">float</span> a1[<span class="integer">3</span>]); <b class="conum">(2)</b>
<span class="directive">void</span> tform_to_view(Tform*, <span class="comment">/**/</span> Tform_v*);

<span class="directive">void</span> tform_log(Tform*); <b class="conum">(3)</b>
<span class="directive">void</span> tform_dump(Tform*, FILE*);</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>allocate/deallocate</p>
</li>
<li>
<p>initialize from two pairs of vectors</p>
</li>
<li>
<p>initialize from a chain of transformations</p>
</li>
<li>
<p>log and dump the state of the transform</p>
</li>
<li>
<p>convert to a structure which can be used on device</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</body>
</html>