<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>frag</title>
<link rel="stylesheet" href="/udoc/css/main.css">
<link rel="stylesheet" href="./pygments-colorful.css">
</head>
<body class="article">
<div id="header">
<h1>frag</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Fragment functions on host and device</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_purpose">1. purpose</a></li>
<li><a href="#_interface">2. interface</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="_purpose">1. purpose</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <em>fragment</em> designates one of the 27 directions \((dx, dy, dz)\),
where \(dx, dy, dz \in \{-1, 0, 1\}\).</p>
</div>
<div class="paragraph">
<p>The fragment \((0, 0, 0)\) is called <em>bulk</em> and has the id <code>frag_bulk</code>.</p>
</div>
<div class="paragraph">
<p>The purpose of this module is to encode and decode the <em>fragments</em>
between <em>fragment ids</em> (numbered from 0 to 26) and <em>directions</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interface">2. interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The major part of the functions are available to both device and host,
within the namespaces <code>fragdev</code> and <code>fraghst</code>, respectively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">int</span> <span class="tok-nf">i2dx</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">);</span>                 <b class="conum">(1)</b>
<span class="tok-kt">int</span> <span class="tok-nf">i2dy</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">);</span>                 <b class="conum">(2)</b>
<span class="tok-kt">int</span> <span class="tok-nf">i2dz</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">);</span>                 <b class="conum">(3)</b>
<span class="tok-kt">void</span> <span class="tok-nf">i2d3</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-cm">/**/</span> <span class="tok-kt">int</span> <span class="tok-n">d</span><span class="tok-p">[</span><span class="tok-mi">3</span><span class="tok-p">]);</span> <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>get \(dx\) from fragment id</p>
</li>
<li>
<p>get \(dy\) from fragment id</p>
</li>
<li>
<p>get \(dz\) from fragment id</p>
</li>
<li>
<p>get \((dx, dy, dz)\) from fragment id</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">int</span> <span class="tok-nf">d2i</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">x</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">y</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">z</span><span class="tok-p">);</span> <b class="conum">(1)</b>
<span class="tok-kt">int</span> <span class="tok-nf">d32i</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">int</span> <span class="tok-n">d</span><span class="tok-p">[</span><span class="tok-mi">3</span><span class="tok-p">]);</span>     <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>get fragment id from \((dx, dy, dz)\)</p>
</li>
<li>
<p>idem with array as input</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">int</span> <span class="tok-nf">ncell</span><span class="tok-p">(</span><span class="tok-n">int3</span> <span class="tok-n">L</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">);</span> <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>given sub-domain sizes <code>L</code>, returns number of neighboring cells to
fragment with id <code>i</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">int</span> <span class="tok-nf">antid2i</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">x</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">y</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">z</span><span class="tok-p">);</span> <b class="conum">(1)</b>
<span class="tok-kt">int</span> <span class="tok-nf">anti</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">);</span>                  <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>given \((dx, dy, dz)\), return the id of the <em>anti</em> fragment (i.e. with direction \((-dx, -dy, -dz)\))</p>
</li>
<li>
<p>given a fragment id, returns the id of the <em>anti</em> fragment</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Only on host:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">void</span> <span class="tok-nf">estimates</span><span class="tok-p">(</span><span class="tok-n">int3</span> <span class="tok-n">L</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">nfrags</span><span class="tok-p">,</span> <span class="tok-kt">float</span> <span class="tok-n">maxd</span><span class="tok-p">,</span> <span class="tok-cm">/**/</span> <span class="tok-kt">int</span> <span class="tok-o">*</span><span class="tok-n">cap</span><span class="tok-p">);</span> <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>given a maximum number density <code>maxp</code>, return an estimate of the
number of particles in each fragment layer.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.0/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>